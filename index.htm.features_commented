<!DOCTYPE html>
<html>
<head>
   <meta charset="utf-8">
   <meta http-equiv="X-UA-Compatible" content="IE=edge">
   <meta name="viewport" content="width=device-width, initial-scale=1">

   <title>FUDGE Dice Roller</title>
   <link rel="stylesheet" href="animate.css">
</head>
<body>

<style>
#diceSet {
   display: flex;
   justify-content: center;
   align-items: center;
   flex-wrap: wrap;
}
.die {
   display: inline-block;
   margin: 3px;
   cursor: pointer;
}
#status {
   text-align: center;
   font-family: sans-serif;
}
/*.black rect, .black path {fill: #000;}*/
.blue rect, .blue path {fill: #036;}
/*.red rect, .red path {fill: #600;}
.purple rect, .purple path {fill: #606;}
.green rect, .green path {fill: #060;}*/
</style>
<script src="//code.jquery.com/jquery-1.12.0.min.js"></script>
<script type="text/javascript">
function rollDice() {
  $('#diceSet').animateCss('wobble');
  var dface = "-" + String.fromCharCode(160) + "+"; // "- +"
  var diceTotal = 0;
  var dCookieNum = $('#diceSet').data('num');
  if (dCookieNum == "") {
    dNum = 4;
  } else {
    dNum = Number(dCookieNum);
  }
  $('.die').each(function() {
    tVal = Math.floor(Math.random() * 3) - 1;
    diceTotal = diceTotal + tVal;
    //$(this).html(dface.substr((tVal+1),1));
    switch (tVal) {
      case -1:
        $(this).html('<svg xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" width="36.688889mm" height="36.688889mm" viewBox="0 0 130 130" version="1.1"><g transform="translate(353.57144,-341.64792)"><path d="m-331.07144 341.64792c-12.465 0-22.5 10.035-22.5 22.5l0 85c0 12.465 10.035 22.5 22.5 22.5l85 0c12.465 0 22.5-10.035 22.5-22.5l0-85c0-12.465-10.035-22.5-22.5-22.5l-85 0zm-11.42968 54.19727 107.85742 0 0 21.60546-107.85742 0 0-21.60546z" fill="#000"/></g></svg>');
        break;
      case 0:
        $(this).html('<svg xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" width="36.688889mm" height="36.688889mm" viewBox="0 0 130 130" version="1.1"><g transform="translate(353.57144,-341.64792)"><rect width="130" height="130" x="-353.57144" y="341.64792" ry="22.5" fill="#000"/></g></svg>');
        break;
      case 1:
        $(this).html('<svg xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" width="36.688889mm" height="36.688889mm" viewBox="0 0 130 130" version="1.1"><g transform="translate(353.57144,-341.64792)"><path d="m-331.07144 341.64792c-12.465 0-22.5 10.035-22.5 22.5l0 85c0 12.465 10.035 22.5 22.5 22.5l85 0c12.465 0 22.5-10.035 22.5-22.5l0-85c0-12.465-10.035-22.5-22.5-22.5l-85 0zm31.69726 11.07226 21.60743 0 0 43.125 43.125 0 0 21.60743-43.125 0 0 43.125-21.60743 0 0-43.125-43.125 0 0-21.60743 43.125 0 0-43.125z" fill="#000"/></g></svg>');
        break;
      }
  });
}

/*function diceColor(pColor) {
  $('#diceSet').data('color', pColor);
  $('.die').removeClass("purple black blue red green");
  switch (pColor) {
    case 1:
      $('.die').addClass('purple');
      break;
    case 2:
      $('.die').addClass('black');
      break;
    case 3:
      $('.die').addClass('blue');
      break;
    case 4:
      $('.die').addClass('red');
      break;
    case 5:
      $('.die').addClass('green');
      break;
  }
}*/
function makeDice(pNum) {
  $('#diceSet').data('num', pNum);
  $('#diceSet').html('');
  for (i = 1; i <= pNum; i++) {
    $('#diceSet').append('<div id="die' + i.toString() + '" class="die blue">&nbsp;</div>');
  }
}

</script>
<!--<img id="settings" src="gear.svg" height="32px" />
<div id="AdvTab" style="display: none;">
   Color:&nbsp;<button class="diceColor" style="background-color: #606;" onclick="diceColor(1)">&nbsp;</button>
   <button class="diceColor" style="background-color: #000;" onclick="diceColor(2)">&nbsp;</button>
   <button class="diceColor" style="background-color: #036;" onclick="diceColor(3)">&nbsp;</button>
   <button class="diceColor" style="background-color: #600;" onclick="diceColor(4)">&nbsp;</button>
   <button class="diceColor" style="background-color: #060;" onclick="diceColor(5)">&nbsp;</button>
   <br>
   Number:&nbsp;<button class="diceNum">1</button>
   <button class="diceNum">2</button>
   <button class="diceNum">3</button>
   <button class="diceNum">4</button>
   <button class="diceNum">5</button>
</div>-->
<div id="diceSet" class="diceSet"></div>
<div id="status"></div>

<script type="text/javascript"> 
   $.fn.extend({
      animateCss: function (animationName) {
         var animationEnd = 'webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend';
         $(this).addClass('animated ' + animationName).one(animationEnd, function() {
            $(this).removeClass('animated ' + animationName);
         });
      }
   });

   $(document).ready(function() {
//      $('#diceSet').data('color', 3);
      $('#diceSet').data('num', 4);
      makeDice($('#diceSet').data('num'));
//      diceColor($('#diceSet').data('color'));
      rollDice();

      $('.die').click(function(){rollDice()});
      $('#settings').click(function(){ console.log('gear clicked');
         $('#AdvTab').toggle()
      });
      $('.diceNum').click(function(){
         makeDice($(this).text());
         //diceColor($('#diceSet').data('color'));
         rollDice();
      });
   });
</script>





</body>
</html>